<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>nkr: Overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">nkr
   </div>
   <div id="projectbrief">My C++20 library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="concepts.html"><span>Concepts</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Overview </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="mainpage"></a> This library is in the early stages of development, but what better time to start end-user documentation? Currently the most useful things about the library are the <a class="el" href="classnkr_1_1atomic__t.html" title="The default template for nkr::atomic_t, which invalidates types not matching any specialization.">nkr::atomic_t</a> and the <a class="el" href="classnkr_1_1pointer__t.html">nkr::pointer_t</a>. These two types have fairly thorough tests in the sister project nkr_test ensuring their functionality, and I'm thinking about making a separate set of documentation for that as well.</p>
<p >More to come as I implement more features! For now I'm going to document the types that are pretty solid.</p>
<h1><a class="anchor" id="autotoc_md0"></a>
Designs</h1>
<h2><a class="anchor" id="_16d56f49_95ba_456e_a026_706c054cb133"></a>
Class Concept Specializations</h2>
<p >Because we are using the C++20 concepts feature, which is not fully implemented in all compilers, we do have to work around a couple of bugs that currently exist in two of the big compilers to varying degrees. In order to use out-of-body class definitions, we use a pattern of concept specialization that has the specializations inherit all of their members from a different class, including methods, ctors, dtor, and assignment operators. This effectively makes the specialization the same class as the base. We put these in a name space one step interior to the namespace where the type lives, and it's named after the type with an additional "$" prefixing it. We also put no members in the default class and only use the specializations. This is to avoid yet another bug that currently exists in one of the big compilers:</p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacenkr.html">nkr</a> { <span class="keyword">namespace </span>$class_t {</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keywordtype">int</span>eger_tr <span class="keywordtype">int</span>eger_p&gt;</div>
<div class="line">    <span class="keyword">class </span>integer_sp</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// has any member you want</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">template</span> &lt;po<span class="keywordtype">int</span>er_tr po<span class="keywordtype">int</span>er_p&gt;</div>
<div class="line">    <span class="keyword">class </span>pointer_sp</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// has any member you want</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">}}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacenkr.html">nkr</a> {</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> inval<span class="keywordtype">id</span>_p&gt;</div>
<div class="line">    <span class="keyword">class </span>class_t</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// has no members, and we usually delete all ctors and dtor explicitly.</span></div>
<div class="line">        <span class="comment">// else it can inherit a default specialization in the sub-namespace.</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keywordtype">int</span>eger_tr <span class="keywordtype">int</span>eger_p&gt;</div>
<div class="line">    <span class="keyword">class </span>class_t&lt;integer_p&gt; :</div>
<div class="line">        <span class="keyword">public</span> $class_t::integer_sp</div>
<div class="line">    {</div>
<div class="line">    <span class="keyword">public</span>:</div>
<div class="line">        <span class="keyword">using</span> $class_t::integer_sp&lt;integer_p&gt;::integer_sp;</div>
<div class="line">        <span class="keyword">using</span> $class_t::integer_sp&lt;integer_p&gt;::operator =;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span>:</div>
<div class="line">        <span class="comment">// it&#39;s important to define these in-body, which we need for a certain ctor condition</span></div>
<div class="line">        class_t(<span class="keyword">const</span> $class_t::integer_sp&lt;integer_p&gt;&amp; other) :</div>
<div class="line">            $class_t::integer_sp&lt;integer_p&gt;(other)</div>
<div class="line">        {</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        class_t($class_t::integer_sp&lt;integer_p&gt;&amp;&amp; other) noexcept :</div>
<div class="line">            $class_t::integer_sp&lt;integer_p&gt;(std::move(other))</div>
<div class="line">        {</div>
<div class="line">        }</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">template</span> &lt;po<span class="keywordtype">int</span>er_tr po<span class="keywordtype">int</span>er_p&gt;</div>
<div class="line">    <span class="keyword">class </span>class_t&lt;pointer_p&gt; :</div>
<div class="line">        <span class="keyword">public</span> $class_t::pointer_sp</div>
<div class="line">    {</div>
<div class="line">    <span class="keyword">public</span>:</div>
<div class="line">        <span class="keyword">using</span> $class_t::pointer_sp&lt;pointer_p&gt;::pointer_sp;</div>
<div class="line">        <span class="keyword">using</span> $class_t::pointer_sp&lt;pointer_p&gt;::operator =;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span>:</div>
<div class="line">        class_t(<span class="keyword">const</span> $class_t::pointer_sp&lt;pointer_p&gt;&amp; other) :</div>
<div class="line">            $class_t::pointer_sp&lt;pointer_p&gt;(other)</div>
<div class="line">        {</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        class_t($class_t::pointer_sp&lt;pointer_p&gt;&amp;&amp; other) noexcept :</div>
<div class="line">            $class_t::pointer_sp&lt;pointer_p&gt;(std::move(other))</div>
<div class="line">        {</div>
<div class="line">        }</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="ttc" id="anamespacenkr_html"><div class="ttname"><a href="namespacenkr.html">nkr</a></div><div class="ttdoc">With the exception of &quot;nkr_&quot; prefixed macros, all other nkr entities are defined in this namespace.</div><div class="ttdef"><b>Definition:</b> allocator_heap_t_dec.h:13</div></div>
</div><!-- fragment --><p ><a href="https://stackoverflow.com/questions/68589314/how-to-define-a-specialized-class-method-outside-of-class-body-in-c">Read about this on stackoverflow.</a> </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
