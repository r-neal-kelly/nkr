<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>nkr: nkr::os::heap Namespace Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">nkr
   </div>
   <div id="projectbrief">My C++20 library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d0/d97/namespacenkr_1_1os_1_1heap.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">nkr::os::heap Namespace Reference<div class="ingroups"><a class="el" href="../../d8/d63/group____d1cd4369__e0f4__4062__8f58__611395da215e.html">namespaces</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Functions that interface with memory located on the heap.  
<a href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Allocation</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p >Borrow a certain amount of memory from the heap. Use it, expand it, and give it back.</p>
</div></td></tr>
<tr class="memitem:a29656eece8a2540374033a49f06f6f8d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/df5/classnkr_1_1bool__t.html">bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a29656eece8a2540374033a49f06f6f8d">Allocate</a> (type_tr auto *&amp;units, <a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga962bdb5ad1c5bc05d87739e09df6082b">count_t</a> unit_count)</td></tr>
<tr class="memdesc:a29656eece8a2540374033a49f06f6f8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gives you memory to use until you deallocate it or your program exits.  <a href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a29656eece8a2540374033a49f06f6f8d">More...</a><br /></td></tr>
<tr class="separator:a29656eece8a2540374033a49f06f6f8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0ff4d5e02756fef478524cdfd46558c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/df5/classnkr_1_1bool__t.html">bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#ab0ff4d5e02756fef478524cdfd46558c">Reallocate</a> (type_tr auto *&amp;units, <a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga962bdb5ad1c5bc05d87739e09df6082b">count_t</a> new_unit_count)</td></tr>
<tr class="memdesc:ab0ff4d5e02756fef478524cdfd46558c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gives you more memory while keeping all your data intact.  <a href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#ab0ff4d5e02756fef478524cdfd46558c">More...</a><br /></td></tr>
<tr class="separator:ab0ff4d5e02756fef478524cdfd46558c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a3ad08385416135f1196479076cbe37"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/d9c/group__intrinsics__primitives.html#ga034482d2e50c6d0448a7953d24860fe9">void_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a9a3ad08385416135f1196479076cbe37">Deallocate</a> (type_tr auto *&amp;units)</td></tr>
<tr class="memdesc:a9a3ad08385416135f1196479076cbe37"><td class="mdescLeft">&#160;</td><td class="mdescRight">Takes back memory you no longer need so it can be reused later.  <a href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a9a3ad08385416135f1196479076cbe37">More...</a><br /></td></tr>
<tr class="separator:a9a3ad08385416135f1196479076cbe37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Zero-Initialized Allocation</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p >A variant of regular allocation, all the values in your memory will be initialized to zero.</p>
</div></td></tr>
<tr class="memitem:a9845749afb4b1e3e577276b4342ea143"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/df5/classnkr_1_1bool__t.html">bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a9845749afb4b1e3e577276b4342ea143">Allocate_Zeros</a> (type_tr auto *&amp;units, <a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga962bdb5ad1c5bc05d87739e09df6082b">count_t</a> unit_count)</td></tr>
<tr class="memdesc:a9845749afb4b1e3e577276b4342ea143"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gives you zero-initialized memory to use until your program exits.  <a href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a9845749afb4b1e3e577276b4342ea143">More...</a><br /></td></tr>
<tr class="separator:a9845749afb4b1e3e577276b4342ea143"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab1a2f6fb3fb56133144cd777abe97bd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/df5/classnkr_1_1bool__t.html">bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#aab1a2f6fb3fb56133144cd777abe97bd">Reallocate_Zeros</a> (type_tr auto *&amp;units, <a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga962bdb5ad1c5bc05d87739e09df6082b">count_t</a> new_unit_count)</td></tr>
<tr class="memdesc:aab1a2f6fb3fb56133144cd777abe97bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gives you more zero-initialized memory while keeping all your data intact.  <a href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#aab1a2f6fb3fb56133144cd777abe97bd">More...</a><br /></td></tr>
<tr class="separator:aab1a2f6fb3fb56133144cd777abe97bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f31aefbed69abd1aae674b80956dd36"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/d9c/group__intrinsics__primitives.html#ga034482d2e50c6d0448a7953d24860fe9">void_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a5f31aefbed69abd1aae674b80956dd36">Deallocate_Zeros</a> (type_tr auto *&amp;units)</td></tr>
<tr class="memdesc:a5f31aefbed69abd1aae674b80956dd36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Takes back memory you no longer need so it can be reused later.  <a href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a5f31aefbed69abd1aae674b80956dd36">More...</a><br /></td></tr>
<tr class="separator:a5f31aefbed69abd1aae674b80956dd36"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Functions that interface with memory located on the heap. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a29656eece8a2540374033a49f06f6f8d" name="a29656eece8a2540374033a49f06f6f8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29656eece8a2540374033a49f06f6f8d">&#9670;&nbsp;</a></span>Allocate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/df5/classnkr_1_1bool__t.html">bool_t</a> nkr::os::heap::Allocate </td>
          <td>(</td>
          <td class="paramtype">type_tr auto *&amp;&#160;</td>
          <td class="paramname"><em>units</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga962bdb5ad1c5bc05d87739e09df6082b">count_t</a>&#160;</td>
          <td class="paramname"><em>unit_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gives you memory to use until you deallocate it or your program exits. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">units</td><td>is the pointer that may be set to point to the allocated memory.</td></tr>
    <tr><td class="paramname">unit_count</td><td>is the number of units (type instances) that will be allocated. It must be greater than zero.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if it succeeds, setting units to the allocated pointer.</dd>
<dd>
<code>false</code> if it fails, setting units to <code>nullptr</code>.</dd></dl>
<p>There are a few limitations to the number of bytes you can allocate depending on:</p>
<ol type="1">
<li>how much ram is physically in the computer</li>
<li>how much space the operating system has left to give</li>
<li>the settings that your compiler operates with</li>
<li>what the natural word size of the processor is</li>
</ol>
<p >At most the largest number of bytes you will be able to allocate is the max number that can fit in an <a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga962bdb5ad1c5bc05d87739e09df6082b" title="Used for unit counts of any arbitrary type.">nkr::count_t</a> (an alias of <a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga6938f0fd61eac987b89d3207836a458b" title="The largest natural type available, the processor&#39;s word.">nkr::word_t</a>). If you are running on a 32 bit processor you will only be able to allocate one byte shy of 4gb, which is no where near the amount of memory you can allocate on a 64 bit processor. Furthermore, limitations may come into play depending on the operating system, which may significantly decrease that amount even further.</p>
<div class="fragment"><div class="line">            <a class="code hl_typedef" href="../../d8/d8d/group__intrinsics__contextuals.html#ga6938f0fd61eac987b89d3207836a458b">word_t</a>* words = <span class="keyword">nullptr</span>;</div>
<div class="line">            CHECK(<a class="code hl_function" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a29656eece8a2540374033a49f06f6f8d">os::heap::Allocate</a>(words, 0xFF));</div>
<div class="line">            CHECK(words != <span class="keyword">nullptr</span>);</div>
<div class="line"> </div>
<div class="line">            <a class="code hl_typedef" href="../../d8/d8d/group__intrinsics__contextuals.html#ga6938f0fd61eac987b89d3207836a458b">word_t</a>* too_many = <span class="keyword">nullptr</span>;</div>
<div class="line">            CHECK(<a class="code hl_function" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a29656eece8a2540374033a49f06f6f8d">os::heap::Allocate</a>(too_many, std::numeric_limits&lt;count_t&gt;::max() / <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="../../d8/d8d/group__intrinsics__contextuals.html#ga6938f0fd61eac987b89d3207836a458b">word_t</a>)) == <span class="keyword">false</span>);</div>
<div class="line">            CHECK(too_many == <span class="keyword">nullptr</span>);</div>
<div class="line"> </div>
<div class="line">            <a class="code hl_function" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a9a3ad08385416135f1196479076cbe37">os::heap::Deallocate</a>(words);</div>
<div class="ttc" id="agroup__intrinsics__contextuals_html_ga6938f0fd61eac987b89d3207836a458b"><div class="ttname"><a href="../../d8/d8d/group__intrinsics__contextuals.html#ga6938f0fd61eac987b89d3207836a458b">nkr::word_t</a></div><div class="ttdeci">u64_t word_t</div><div class="ttdoc">The largest natural type available, the processor's word.</div><div class="ttdef"><b>Definition:</b> intrinsics.h:79</div></div>
<div class="ttc" id="anamespacenkr_1_1os_1_1heap_html_a29656eece8a2540374033a49f06f6f8d"><div class="ttname"><a href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a29656eece8a2540374033a49f06f6f8d">nkr::os::heap::Allocate</a></div><div class="ttdeci">bool_t Allocate(type_tr auto *&amp;units, count_t unit_count)</div><div class="ttdoc">Gives you memory to use until you deallocate it or your program exits.</div><div class="ttdef"><b>Definition:</b> os.inl:1076</div></div>
<div class="ttc" id="anamespacenkr_1_1os_1_1heap_html_a9a3ad08385416135f1196479076cbe37"><div class="ttname"><a href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a9a3ad08385416135f1196479076cbe37">nkr::os::heap::Deallocate</a></div><div class="ttdeci">void_t Deallocate(type_tr auto *&amp;units)</div><div class="ttdoc">Takes back memory you no longer need so it can be reused later.</div><div class="ttdef"><b>Definition:</b> os.inl:1112</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="ab0ff4d5e02756fef478524cdfd46558c" name="ab0ff4d5e02756fef478524cdfd46558c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0ff4d5e02756fef478524cdfd46558c">&#9670;&nbsp;</a></span>Reallocate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/df5/classnkr_1_1bool__t.html">bool_t</a> nkr::os::heap::Reallocate </td>
          <td>(</td>
          <td class="paramtype">type_tr auto *&amp;&#160;</td>
          <td class="paramname"><em>units</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga962bdb5ad1c5bc05d87739e09df6082b">count_t</a>&#160;</td>
          <td class="paramname"><em>new_unit_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gives you more memory while keeping all your data intact. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">units</td><td>should be a pointer set by <a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a29656eece8a2540374033a49f06f6f8d" title="Gives you memory to use until you deallocate it or your program exits.">nkr::os::heap::Allocate</a> or <a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#ab0ff4d5e02756fef478524cdfd46558c" title="Gives you more memory while keeping all your data intact.">nkr::os::heap::Reallocate</a>. When successful, it will be set to a new pointer if necessary, or else it will be left unchanged.</td></tr>
    <tr><td class="paramname">new_unit_count</td><td>is the total number of units (type instances) that may be allocated after this function returns. It should be the total size you want the memory to be. It must be greater than zero.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if it succeeds, setting units to a different allocated pointer if necessary, else leaving it alone.</dd>
<dd>
<code>false</code> when it fails, leaving units alone.</dd></dl>
<p>This will allocate more memory for you if the new count is greater than the currently allocated count. Otherwise, it will simply return as if it had succeeded, with no changes to the pointer. See <a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a29656eece8a2540374033a49f06f6f8d" title="Gives you memory to use until you deallocate it or your program exits.">nkr::os::heap::Allocate</a> for more details about allocation generally.</p>
<dl class="section note"><dt>Note</dt><dd>This cannot shrink the memory you allocate, but some higher level types in the library may by request. </dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000029">Todo:</a></b></dt><dd>Maybe return an enum_t to indicate different kinds of failures? </dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<div class="fragment"><div class="line">            <a class="code hl_typedef" href="../../d8/d8d/group__intrinsics__contextuals.html#ga6938f0fd61eac987b89d3207836a458b">word_t</a>* words = <span class="keyword">nullptr</span>;</div>
<div class="line">            <a class="code hl_function" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a29656eece8a2540374033a49f06f6f8d">os::heap::Allocate</a>(words, 0xFF);</div>
<div class="line">            CHECK(<a class="code hl_function" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#ab0ff4d5e02756fef478524cdfd46558c">os::heap::Reallocate</a>(words, 0x100) == <span class="keyword">true</span>);</div>
<div class="line">            CHECK(words != <span class="keyword">nullptr</span>);</div>
<div class="line"> </div>
<div class="line">            <a class="code hl_typedef" href="../../d8/d8d/group__intrinsics__contextuals.html#ga6938f0fd61eac987b89d3207836a458b">word_t</a>* backup = words;</div>
<div class="line">            CHECK(<a class="code hl_function" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#ab0ff4d5e02756fef478524cdfd46558c">os::heap::Reallocate</a>(words, std::numeric_limits&lt;count_t&gt;::max() / <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="../../d8/d8d/group__intrinsics__contextuals.html#ga6938f0fd61eac987b89d3207836a458b">word_t</a>)) == <span class="keyword">false</span>);</div>
<div class="line">            CHECK(words == backup);</div>
<div class="line"> </div>
<div class="line">            <a class="code hl_function" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a9a3ad08385416135f1196479076cbe37">os::heap::Deallocate</a>(words);</div>
<div class="ttc" id="anamespacenkr_1_1os_1_1heap_html_ab0ff4d5e02756fef478524cdfd46558c"><div class="ttname"><a href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#ab0ff4d5e02756fef478524cdfd46558c">nkr::os::heap::Reallocate</a></div><div class="ttdeci">bool_t Reallocate(type_tr auto *&amp;units, count_t new_unit_count)</div><div class="ttdoc">Gives you more memory while keeping all your data intact.</div><div class="ttdef"><b>Definition:</b> os.inl:1094</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a9a3ad08385416135f1196479076cbe37" name="a9a3ad08385416135f1196479076cbe37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a3ad08385416135f1196479076cbe37">&#9670;&nbsp;</a></span>Deallocate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/d9c/group__intrinsics__primitives.html#ga034482d2e50c6d0448a7953d24860fe9">void_t</a> nkr::os::heap::Deallocate </td>
          <td>(</td>
          <td class="paramtype">type_tr auto *&amp;&#160;</td>
          <td class="paramname"><em>units</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Takes back memory you no longer need so it can be reused later. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">units</td><td>should be a pointer set by <a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a29656eece8a2540374033a49f06f6f8d" title="Gives you memory to use until you deallocate it or your program exits.">nkr::os::heap::Allocate</a> or <a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#ab0ff4d5e02756fef478524cdfd46558c" title="Gives you more memory while keeping all your data intact.">nkr::os::heap::Reallocate</a>. It will be set to <code>nullptr</code> after deallocation. If it is already <code>nullptr</code>, the function returns as if it was already successful.</td></tr>
  </table>
  </dd>
</dl>
<p>When using these functions, memory will never be deallocated automatically for you like it is in some higher level types. You will have to manually deallocate every pointer you allocate, or else you may unexpectedly run out of memory. Regardless, the operating system will deallocate everything that has not already been deallocated when your program exits.</p>
<div class="fragment"><div class="line">            <a class="code hl_typedef" href="../../d8/d8d/group__intrinsics__contextuals.html#ga6938f0fd61eac987b89d3207836a458b">word_t</a>* words = <span class="keyword">nullptr</span>;</div>
<div class="line">            <a class="code hl_function" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a29656eece8a2540374033a49f06f6f8d">os::heap::Allocate</a>(words, 0xFF);</div>
<div class="line">            <a class="code hl_function" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a9a3ad08385416135f1196479076cbe37">os::heap::Deallocate</a>(words);</div>
<div class="line">            CHECK(words == <span class="keyword">nullptr</span>);</div>
<div class="line"> </div>
<div class="line">            <a class="code hl_function" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a9a3ad08385416135f1196479076cbe37">os::heap::Deallocate</a>(words);</div>
<div class="line">            CHECK(words == <span class="keyword">nullptr</span>);</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a9845749afb4b1e3e577276b4342ea143" name="a9845749afb4b1e3e577276b4342ea143"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9845749afb4b1e3e577276b4342ea143">&#9670;&nbsp;</a></span>Allocate_Zeros()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/df5/classnkr_1_1bool__t.html">bool_t</a> nkr::os::heap::Allocate_Zeros </td>
          <td>(</td>
          <td class="paramtype">type_tr auto *&amp;&#160;</td>
          <td class="paramname"><em>units</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga962bdb5ad1c5bc05d87739e09df6082b">count_t</a>&#160;</td>
          <td class="paramname"><em>unit_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gives you zero-initialized memory to use until your program exits. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">units</td><td>is the pointer that may be set to point to the allocated memory.</td></tr>
    <tr><td class="paramname">unit_count</td><td>is the number of units (type instances) that will be allocated. It must be greater than zero.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if it succeeds, setting units to the allocated pointer.</dd>
<dd>
<code>false</code> if it fails, setting units to <code>nullptr</code>.</dd></dl>
<p>This uses an efficient operating system dependent algorithm to avoid zeroing out all values during runtime. Normally the os will keep pages of zero initialized bytes ready for allocation and it will only need to initialize them on the occasion that it doesn't have any of those pages readily available. Please see <a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a29656eece8a2540374033a49f06f6f8d" title="Gives you memory to use until you deallocate it or your program exits.">nkr::os::heap::Allocate</a> for more details.</p>
<dl class="section note"><dt>Note</dt><dd>The returned pointer can be used with <a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#ab0ff4d5e02756fef478524cdfd46558c" title="Gives you more memory while keeping all your data intact.">nkr::os::heap::Reallocate</a> to allocate more memory but without it being zero-intialized, and <a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a9a3ad08385416135f1196479076cbe37" title="Takes back memory you no longer need so it can be reused later.">nkr::os::heap::Deallocate</a> to free the memory. Both of these are currently frowned upon because they may not work in future updates or on certain operating systems. </dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<div class="fragment"><div class="line">            <a class="code hl_typedef" href="../../d8/d8d/group__intrinsics__contextuals.html#ga6938f0fd61eac987b89d3207836a458b">word_t</a>* words = <span class="keyword">nullptr</span>;</div>
<div class="line">            CHECK(<a class="code hl_function" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a9845749afb4b1e3e577276b4342ea143">os::heap::Allocate_Zeros</a>(words, 0xFF));</div>
<div class="line">            CHECK(words != <span class="keyword">nullptr</span>);</div>
<div class="line">            <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d8/d8d/group__intrinsics__contextuals.html#gafcd45a8ee0ce155f841b4cadb25d9b4f">index_t</a> idx = 0, end = 0xFF; idx &lt; end; idx += 1) {</div>
<div class="line">                WARN(words[idx] == 0);</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <a class="code hl_typedef" href="../../d8/d8d/group__intrinsics__contextuals.html#ga6938f0fd61eac987b89d3207836a458b">word_t</a>* too_many = <span class="keyword">nullptr</span>;</div>
<div class="line">            CHECK(<a class="code hl_function" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a9845749afb4b1e3e577276b4342ea143">os::heap::Allocate_Zeros</a>(too_many, std::numeric_limits&lt;count_t&gt;::max() / <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="../../d8/d8d/group__intrinsics__contextuals.html#ga6938f0fd61eac987b89d3207836a458b">word_t</a>)) == <span class="keyword">false</span>);</div>
<div class="line">            CHECK(too_many == <span class="keyword">nullptr</span>);</div>
<div class="line"> </div>
<div class="line">            <a class="code hl_function" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a5f31aefbed69abd1aae674b80956dd36">os::heap::Deallocate_Zeros</a>(words);</div>
<div class="ttc" id="agroup__intrinsics__contextuals_html_gafcd45a8ee0ce155f841b4cadb25d9b4f"><div class="ttname"><a href="../../d8/d8d/group__intrinsics__contextuals.html#gafcd45a8ee0ce155f841b4cadb25d9b4f">nkr::index_t</a></div><div class="ttdeci">word_t index_t</div><div class="ttdoc">Used for unit indices of any arbitrary array of types.</div><div class="ttdef"><b>Definition:</b> intrinsics.h:85</div></div>
<div class="ttc" id="anamespacenkr_1_1os_1_1heap_html_a5f31aefbed69abd1aae674b80956dd36"><div class="ttname"><a href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a5f31aefbed69abd1aae674b80956dd36">nkr::os::heap::Deallocate_Zeros</a></div><div class="ttdeci">void_t Deallocate_Zeros(type_tr auto *&amp;units)</div><div class="ttdoc">Takes back memory you no longer need so it can be reused later.</div><div class="ttdef"><b>Definition:</b> os.inl:1156</div></div>
<div class="ttc" id="anamespacenkr_1_1os_1_1heap_html_a9845749afb4b1e3e577276b4342ea143"><div class="ttname"><a href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a9845749afb4b1e3e577276b4342ea143">nkr::os::heap::Allocate_Zeros</a></div><div class="ttdeci">bool_t Allocate_Zeros(type_tr auto *&amp;units, count_t unit_count)</div><div class="ttdoc">Gives you zero-initialized memory to use until your program exits.</div><div class="ttdef"><b>Definition:</b> os.inl:1120</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="aab1a2f6fb3fb56133144cd777abe97bd" name="aab1a2f6fb3fb56133144cd777abe97bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab1a2f6fb3fb56133144cd777abe97bd">&#9670;&nbsp;</a></span>Reallocate_Zeros()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/df5/classnkr_1_1bool__t.html">bool_t</a> nkr::os::heap::Reallocate_Zeros </td>
          <td>(</td>
          <td class="paramtype">type_tr auto *&amp;&#160;</td>
          <td class="paramname"><em>units</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga962bdb5ad1c5bc05d87739e09df6082b">count_t</a>&#160;</td>
          <td class="paramname"><em>new_unit_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gives you more zero-initialized memory while keeping all your data intact. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">units</td><td>should be a pointer set by <a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a9845749afb4b1e3e577276b4342ea143" title="Gives you zero-initialized memory to use until your program exits.">nkr::os::heap::Allocate_Zeros</a> or <a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#aab1a2f6fb3fb56133144cd777abe97bd" title="Gives you more zero-initialized memory while keeping all your data intact.">nkr::os::heap::Reallocate_Zeros</a>. When successful, it will be set to a new pointer if necessary, or else it will be left unchanged.</td></tr>
    <tr><td class="paramname">new_unit_count</td><td>is the total number of units (type instances) that may be allocated after this function returns. It should be the total size you want the memory to be. It must be greater than zero.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if it succeeds, setting units to a different allocated pointer if necessary, else leaving it alone.</dd>
<dd>
<code>false</code> when it fails, leaving units alone.</dd></dl>
<p>Please see <a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#ab0ff4d5e02756fef478524cdfd46558c" title="Gives you more memory while keeping all your data intact.">nkr::os::heap::Reallocate</a> for more details.</p>
<div class="fragment"><div class="line">            <a class="code hl_typedef" href="../../d8/d8d/group__intrinsics__contextuals.html#ga6938f0fd61eac987b89d3207836a458b">word_t</a>* words = <span class="keyword">nullptr</span>;</div>
<div class="line">            <a class="code hl_function" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a9845749afb4b1e3e577276b4342ea143">os::heap::Allocate_Zeros</a>(words, 0xFF);</div>
<div class="line">            CHECK(<a class="code hl_function" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#aab1a2f6fb3fb56133144cd777abe97bd">os::heap::Reallocate_Zeros</a>(words, 0x100) == <span class="keyword">true</span>);</div>
<div class="line">            CHECK(words != <span class="keyword">nullptr</span>);</div>
<div class="line">            <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d8/d8d/group__intrinsics__contextuals.html#gafcd45a8ee0ce155f841b4cadb25d9b4f">index_t</a> idx = 0, end = 0x100; idx &lt; end; idx += 1) {</div>
<div class="line">                WARN(words[idx] == 0);</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <a class="code hl_typedef" href="../../d8/d8d/group__intrinsics__contextuals.html#ga6938f0fd61eac987b89d3207836a458b">word_t</a>* backup = words;</div>
<div class="line">            CHECK(<a class="code hl_function" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#aab1a2f6fb3fb56133144cd777abe97bd">os::heap::Reallocate_Zeros</a>(words, std::numeric_limits&lt;count_t&gt;::max() / <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="../../d8/d8d/group__intrinsics__contextuals.html#ga6938f0fd61eac987b89d3207836a458b">word_t</a>)) == <span class="keyword">false</span>);</div>
<div class="line">            CHECK(words == backup);</div>
<div class="line"> </div>
<div class="line">            <a class="code hl_function" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a5f31aefbed69abd1aae674b80956dd36">os::heap::Deallocate_Zeros</a>(words);</div>
<div class="ttc" id="anamespacenkr_1_1os_1_1heap_html_aab1a2f6fb3fb56133144cd777abe97bd"><div class="ttname"><a href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#aab1a2f6fb3fb56133144cd777abe97bd">nkr::os::heap::Reallocate_Zeros</a></div><div class="ttdeci">bool_t Reallocate_Zeros(type_tr auto *&amp;units, count_t new_unit_count)</div><div class="ttdoc">Gives you more zero-initialized memory while keeping all your data intact.</div><div class="ttdef"><b>Definition:</b> os.inl:1138</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a5f31aefbed69abd1aae674b80956dd36" name="a5f31aefbed69abd1aae674b80956dd36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f31aefbed69abd1aae674b80956dd36">&#9670;&nbsp;</a></span>Deallocate_Zeros()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/d9c/group__intrinsics__primitives.html#ga034482d2e50c6d0448a7953d24860fe9">void_t</a> nkr::os::heap::Deallocate_Zeros </td>
          <td>(</td>
          <td class="paramtype">type_tr auto *&amp;&#160;</td>
          <td class="paramname"><em>units</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Takes back memory you no longer need so it can be reused later. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">units</td><td>should be a pointer set by <a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a9845749afb4b1e3e577276b4342ea143" title="Gives you zero-initialized memory to use until your program exits.">nkr::os::heap::Allocate_Zeros</a> or <a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#aab1a2f6fb3fb56133144cd777abe97bd" title="Gives you more zero-initialized memory while keeping all your data intact.">nkr::os::heap::Reallocate_Zeros</a>. It will be set to <code>nullptr</code> after deallocation. If it is already <code>nullptr</code>, the function returns as if it was already successful.</td></tr>
  </table>
  </dd>
</dl>
<p>Please see <a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a9a3ad08385416135f1196479076cbe37" title="Takes back memory you no longer need so it can be reused later.">nkr::os::heap::Deallocate</a> for more details.</p>
<dl class="section note"><dt>Note</dt><dd>This does not zero the memory. </dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<div class="fragment"><div class="line">            <a class="code hl_typedef" href="../../d8/d8d/group__intrinsics__contextuals.html#ga6938f0fd61eac987b89d3207836a458b">word_t</a>* words = <span class="keyword">nullptr</span>;</div>
<div class="line">            <a class="code hl_function" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a9845749afb4b1e3e577276b4342ea143">os::heap::Allocate_Zeros</a>(words, 0xFF);</div>
<div class="line">            <a class="code hl_function" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a5f31aefbed69abd1aae674b80956dd36">os::heap::Deallocate_Zeros</a>(words);</div>
<div class="line">            CHECK(words == <span class="keyword">nullptr</span>);</div>
<div class="line"> </div>
<div class="line">            <a class="code hl_function" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a5f31aefbed69abd1aae674b80956dd36">os::heap::Deallocate_Zeros</a>(words);</div>
<div class="line">            CHECK(words == <span class="keyword">nullptr</span>);</div>
</div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dc/d0c/namespacenkr.html">nkr</a></li><li class="navelem"><a class="el" href="../../dc/d5c/namespacenkr_1_1os.html">os</a></li><li class="navelem"><a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html">heap</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
