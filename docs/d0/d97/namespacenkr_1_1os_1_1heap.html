<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>nkr: nkr::os::heap Namespace Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">nkr
   </div>
   <div id="projectbrief">my modern C++20 library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d0/d97/namespacenkr_1_1os_1_1heap.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">nkr::os::heap Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">allocation</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Borrow a certain amount of memory from the heap. Grow it or give it back.</p>
<p>There are a few limitations to the number of bytes you can allocate depending on:</p>
<ol type="1">
<li>how much ram is physically in the computer</li>
<li>how much space the operating system has left to give</li>
<li>the settings that your compiler operates with</li>
<li>what the natural word size of the processor is</li>
</ol>
<p>At most the largest number of bytes you will be able to allocate is the max number that can fit in an <a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga962bdb5ad1c5bc05d87739e09df6082b" title="Used for unit counts of any arbitrary type.">nkr::count_t</a> (an alias of <a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga0b47ac447d5aa5308b460c8a90a9dda0" title="The largest natural type available, the processor&#39;s word.">nkr::word_t</a>). If you are running on a 32 bit processor you will only be able to allocate one byte shy of 4gb, which is no where near the amount of memory you can allocate on a 64 bit processor. Furthermore, limitations may come into play depending on the operating system, which may significantly decrease that amount even further.</p>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000006">Todo:</a></b></dt><dd><p class="startdd">make sure to doc assertions </p>
<p class="enddd">link to types that can shrink data in the above note. <a class="el" href="../../d5/d74/classnkr_1_1array__dynamic__t.html">array_dynamic_t</a> should be able to do that. </p>
</dd></dl>
</div></td></tr>
<tr class="memitem:a9099c1e3b4fef5138d9050bc9eb64175"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga8160404f5568b12b1b5163796d259d12">byte_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a9099c1e3b4fef5138d9050bc9eb64175">Allocate</a> (<a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga962bdb5ad1c5bc05d87739e09df6082b">count_t</a> byte_count)</td></tr>
<tr class="separator:a9099c1e3b4fef5138d9050bc9eb64175"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bc8b91e11071847eea4b6116bba2b57"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/d9c/group__intrinsics__primitives.html#gabc806439dfc01fb2352e5f2abb501598">bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a6bc8b91e11071847eea4b6116bba2b57">Reallocate</a> (<a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga8160404f5568b12b1b5163796d259d12">byte_t</a> *&amp;bytes, <a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga962bdb5ad1c5bc05d87739e09df6082b">count_t</a> new_byte_count)</td></tr>
<tr class="separator:a6bc8b91e11071847eea4b6116bba2b57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2547dacbc3a2259d2b1f55ea0508495"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/d9c/group__intrinsics__primitives.html#ga034482d2e50c6d0448a7953d24860fe9">void_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#ac2547dacbc3a2259d2b1f55ea0508495">Deallocate</a> (<a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga8160404f5568b12b1b5163796d259d12">byte_t</a> *&amp;bytes)</td></tr>
<tr class="separator:ac2547dacbc3a2259d2b1f55ea0508495"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">zero-initialized allocation</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>This is a variant of regular allocation. The only functional difference is that it initializes all values to zero. This uses an efficient operating system dependent algorithm to avoid zeroing out all values during runtime. Normally the os will keep pages of zero'd out bytes ready for allocation and will only need to initialize them on the occasion that it doesn't have those pages readily available. </p>
</div></td></tr>
<tr class="memitem:ab50ba4a90f8d9eaa0219c62fa9fb623d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga8160404f5568b12b1b5163796d259d12">byte_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#ab50ba4a90f8d9eaa0219c62fa9fb623d">Allocate_Zeros</a> (<a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga962bdb5ad1c5bc05d87739e09df6082b">count_t</a> byte_count)</td></tr>
<tr class="separator:ab50ba4a90f8d9eaa0219c62fa9fb623d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6e921144fedd5bddf2d85c71e1794bf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/d9c/group__intrinsics__primitives.html#gabc806439dfc01fb2352e5f2abb501598">bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#ab6e921144fedd5bddf2d85c71e1794bf">Reallocate_Zeros</a> (<a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga8160404f5568b12b1b5163796d259d12">byte_t</a> *&amp;bytes, <a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga962bdb5ad1c5bc05d87739e09df6082b">count_t</a> new_byte_count)</td></tr>
<tr class="separator:ab6e921144fedd5bddf2d85c71e1794bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cdfba43ee9cf5a050ecb20fe82f5bb4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/d9c/group__intrinsics__primitives.html#ga034482d2e50c6d0448a7953d24860fe9">void_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a3cdfba43ee9cf5a050ecb20fe82f5bb4">Deallocate_Zeros</a> (<a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga8160404f5568b12b1b5163796d259d12">byte_t</a> *&amp;bytes)</td></tr>
<tr class="separator:a3cdfba43ee9cf5a050ecb20fe82f5bb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9099c1e3b4fef5138d9050bc9eb64175"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9099c1e3b4fef5138d9050bc9eb64175">&#9670;&nbsp;</a></span>Allocate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga8160404f5568b12b1b5163796d259d12">byte_t</a> * nkr::os::heap::Allocate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga962bdb5ad1c5bc05d87739e09df6082b">count_t</a>&#160;</td>
          <td class="paramname"><em>byte_count</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd><em>on success</em>: a pointer to the allocated bytes </dd>
<dd>
<em>on failure</em>: a nullptr </dd></dl>

</div>
</div>
<a id="a6bc8b91e11071847eea4b6116bba2b57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bc8b91e11071847eea4b6116bba2b57">&#9670;&nbsp;</a></span>Reallocate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/d9c/group__intrinsics__primitives.html#gabc806439dfc01fb2352e5f2abb501598">bool_t</a> nkr::os::heap::Reallocate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga8160404f5568b12b1b5163796d259d12">byte_t</a> *&amp;&#160;</td>
          <td class="paramname"><em>bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga962bdb5ad1c5bc05d87739e09df6082b">count_t</a>&#160;</td>
          <td class="paramname"><em>new_byte_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd><em>on success</em>: true </dd>
<dd>
<em>on failure</em>: false</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This cannot shrink the amount of memory you allocate, but higher level types in the library offer this capability. You can also provide your own functionality by using these functions. </dd></dl>

</div>
</div>
<a id="ac2547dacbc3a2259d2b1f55ea0508495"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2547dacbc3a2259d2b1f55ea0508495">&#9670;&nbsp;</a></span>Deallocate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/d9c/group__intrinsics__primitives.html#ga034482d2e50c6d0448a7953d24860fe9">void_t</a> nkr::os::heap::Deallocate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga8160404f5568b12b1b5163796d259d12">byte_t</a> *&amp;&#160;</td>
          <td class="paramname"><em>bytes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab50ba4a90f8d9eaa0219c62fa9fb623d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab50ba4a90f8d9eaa0219c62fa9fb623d">&#9670;&nbsp;</a></span>Allocate_Zeros()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga8160404f5568b12b1b5163796d259d12">byte_t</a> * nkr::os::heap::Allocate_Zeros </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga962bdb5ad1c5bc05d87739e09df6082b">count_t</a>&#160;</td>
          <td class="paramname"><em>byte_count</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd><em>on success</em>: a pointer to the allocated bytes </dd>
<dd>
<em>on failure</em>: a nullptr</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The returned pointer can be used with <a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#a6bc8b91e11071847eea4b6116bba2b57">nkr::os::heap::Reallocate</a> to allocate more memory that is not zero-intialized, however this is frowned upon because it may not work in future updates or on certain operating systems.</dd>
<dd>
Although the returned pointer can be used with <a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html#ac2547dacbc3a2259d2b1f55ea0508495">nkr::os::heap::Deallocate</a>, this is frowned upon because it may not work in future updates or on certain operating systems. </dd></dl>

</div>
</div>
<a id="ab6e921144fedd5bddf2d85c71e1794bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6e921144fedd5bddf2d85c71e1794bf">&#9670;&nbsp;</a></span>Reallocate_Zeros()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/d9c/group__intrinsics__primitives.html#gabc806439dfc01fb2352e5f2abb501598">bool_t</a> nkr::os::heap::Reallocate_Zeros </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga8160404f5568b12b1b5163796d259d12">byte_t</a> *&amp;&#160;</td>
          <td class="paramname"><em>bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga962bdb5ad1c5bc05d87739e09df6082b">count_t</a>&#160;</td>
          <td class="paramname"><em>new_byte_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd><em>on success</em>: true </dd>
<dd>
<em>on failure</em>: false </dd></dl>

</div>
</div>
<a id="a3cdfba43ee9cf5a050ecb20fe82f5bb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cdfba43ee9cf5a050ecb20fe82f5bb4">&#9670;&nbsp;</a></span>Deallocate_Zeros()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/d9c/group__intrinsics__primitives.html#ga034482d2e50c6d0448a7953d24860fe9">void_t</a> nkr::os::heap::Deallocate_Zeros </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d8d/group__intrinsics__contextuals.html#ga8160404f5568b12b1b5163796d259d12">byte_t</a> *&amp;&#160;</td>
          <td class="paramname"><em>bytes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section note"><dt>Note</dt><dd>This does not zero the memory. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dc/d0c/namespacenkr.html">nkr</a></li><li class="navelem"><a class="el" href="../../dc/d5c/namespacenkr_1_1os.html">os</a></li><li class="navelem"><a class="el" href="../../d0/d97/namespacenkr_1_1os_1_1heap.html">heap</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
